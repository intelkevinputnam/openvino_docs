
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Custom Model Loader {#ovms_docs_custom_loader} &#8212; OpenVINO™  documentation</title>
    
    
  <link href="../../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/doxyrest-pygments.css" />
    
  <link rel="preload" as="script" href="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <link href="../../../../_static/css/media/favicon.ico" rel="shortcut icon">
    <link rel="stylesheet" href="../../../../_static/css/openvino_sphinx_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/button.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/input.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/textfield.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/tabs.css" type="text/css" />
    <script src="../../../../_static/js/openvino_sphinx_theme.js"></script>
    <link rel="stylesheet" href="../../../../_static/css/viewer.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.7/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-barchart-background@1.3.0/build/Plugin.Barchart.Background.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-deferred@1"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.1/papaparse.min.js"></script>
    <script src="../../../../_static/js/viewer.min.js"></script>
    <script src="/assets/versions_raw.js"></script>

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/tabs.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/js/custom.js"></script>
    <script src="../../../../_static/js/graphs.js"></script>
    <script src="../../../../_static/js/graphs_ov_tf.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../_static/togglebutton.js"></script>
    <script src="../../../../_static/target-highlight.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="canonical" href="https://docs.openvino.ai/latest/pages/documentation/ecosystem/model-server/custom_model_loader.html" />
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
      <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../../index.html">
  <img src="../../../../_static/logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../get-started-guide.html">
  Get Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../documentation.html">
  Documentation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../tutorials.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../api/api_reference.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../model_zoo.html">
  Model Zoo
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../resources.html">
  Resources
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../languages/zh_CN/index.html">
  简体中文
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/openvinotoolkit/openvino" rel="noopener" target="_blank" title="GitHub">
            <span><i class="sst-github"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
</ul>
      </div>
      
      <div class="navbar-end-item">
        
<div class="dropdown sst-dropdown sst-dropdown-navbar">
  <button class="btn sst-btn dropdown-toggle" type="button" id="version-selector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
  <div class="dropdown-menu" aria-labelledby="version-selector">
  </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        

<div class="dropdown sst-dropdown sst-dropdown-navbar">
  <button class="btn sst-btn dropdown-toggle" type="button" id="language-selector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</button>
  <div class="dropdown-menu" aria-labelledby="language-selector">
    
      
        <a class="dropdown-item font-weight-bold" href="openvino_docs/index.html">English</a>
      
    
      
        <a  class="dropdown-item" href="openvino_docs/languages/zh_CN/index.html">简体中文 (Simplified Chinese)</a>
      
    
  </div>
</div>

      </div>
      
    </div>
  </div>
</div>
        <div id="collapse-nav-wrapper" class="container-xl">
          <button id="collapse-nav" class="button bttn-prm button-size-m" type="button" data-toggle="collapse" data-target="#nav-tree" aria-expanded="false" aria-controls="nav-tree">
            Documentation navigation <i class="fas fa-chevron-down"></i>
          </button>
        </div>
      </nav>
      <div class="transition-banner container-fluid alert alert-info alert-dismissible fade show" role="alert">
        <p>OpenVINO 2022.1 introduces a new version of OpenVINO API (API 2.0). For more information on the changes and transition steps, see the <a href="https://docs.openvino.ai/latest/openvino_2_0_transition_guide.html">transition guide</a></p>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar" id="nav-tree"><form class="searchForm bd-search d-flex align-items-center" action="../../../../search.html" method="get">
    <i class="icon fas fa-search"></i>
    <input type="search" class="form-control" name="query" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Custom Model Loader {#ovms_docs_custom_loader}
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom-loader-interface">
   Custom Loader Interface
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#model-server-config-file">
     Model Server Config File
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#c-api-interface-for-custom-loader">
     C++ API Interface for custom loader:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-a-custom-loader">
   Writing a Custom Loader:
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-example-customloader">
   Running Example Customloader:
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#blacklisting-the-model">
     Blacklisting the model
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                <div class="tocsection download-docs">
  <div class="dropdown sst-dropdown">
    <button class="button bttn-prm button-size-m" data-display="static" type="button" id="download-options"
      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Download Docs
    </button>
    <div class="dropdown-menu" aria-labelledby="download-options">
      <a class="dropdown-item" href="#" onclick="window.print()">.pdf</a>
      <a id="download-zip-btn" class="dropdown-item" href="#">.zip</a>
    </div>
  </div>
</div>
              </div>
              
            
          </div>
          

          
          
              
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">

<div class="tocsection editthispage">
    <a href="None">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

            
                <div>
                  
  <section id="custom-model-loader-ovms-docs-custom-loader">
<h1>Custom Model Loader {#ovms_docs_custom_loader}<a class="headerlink" href="#custom-model-loader-ovms-docs-custom-loader" title="Permalink to this headline">¶</a></h1>
<p>Before loading the models directly from files, some extra processing or checking may be required. Typical examples are loading encrypted files or checking for model license, and other. In such cases, this customloader interface allows users to write their own custom model loader based on the predefine interface and load the same as a dynamic library.</p>
<p>This document gives details on adding custom loader configuration, custom loader interface, and other details.</p>
</section>
<section id="custom-loader-interface">
<h1>Custom Loader Interface<a class="headerlink" href="#custom-loader-interface" title="Permalink to this headline">¶</a></h1>
<section id="model-server-config-file">
<h2>Model Server Config File<a class="headerlink" href="#model-server-config-file" title="Permalink to this headline">¶</a></h2>
<p>A new section is added to the config file syntax to define customloader:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   &quot;custom_loader_config_list&quot;:[
    {
            &quot;config&quot;:{
            &quot;loader_name&quot;: &quot;#custom loader name&quot;,
            &quot;library_path&quot;: &quot;#Shared library path&quot;,
            &quot;loader_config_file&quot;: &quot;#Seperate config file with custom loader speicific details in json format&quot;
            }
    }
    ]
</pre></div>
</div>
<p>Using the above syntax, multiple customloaders can be defined in the model server config file.</p>
<p>To enable a particular model to load using custom loader, add extra parameter in the model config as shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    &quot;model_config_list&quot;:[
    {
            &quot;config&quot;:{
            &quot;name&quot;:&quot;sampleloader-model&quot;,
            &quot;base_path&quot;:&quot;model/fdsample&quot;,
            &quot;custom_loader_options&quot;: {&quot;loader_name&quot;:  &quot;#custom loader name&quot;, &quot;#parameters for customloader including file name etc in json format&quot;}
            }
    }
    ]
</pre></div>
</div>
</section>
<section id="c-api-interface-for-custom-loader">
<h2>C++ API Interface for custom loader:<a class="headerlink" href="#c-api-interface-for-custom-loader" title="Permalink to this headline">¶</a></h2>
<p>A base class <strong>CustomLoaderInterface</strong> along with interface API is defined in <a class="reference external" href="https://github.com/openvinotoolkit/model_server/blob/releases/2022/1/src/customloaderinterface.hpp">src/customloaderinterface.hpp</a></p>
<p>Refer to this file  for API details.</p>
</section>
</section>
<section id="writing-a-custom-loader">
<h1>Writing a Custom Loader:<a class="headerlink" href="#writing-a-custom-loader" title="Permalink to this headline">¶</a></h1>
<p>Derive the new custom loader class from base class <strong>CustomLoaderInterface</strong> and define all the virtual functions specified. The library shall contain a function with name</p>
<p><em>CustomLoaderInterface createCustomLoader</em>*
which allocates the new custom loader and returns a pointer to the base class.</p>
<p>An example customloader which reads files and returns required buffers to be loaded is implemented and provided as reference in <strong>src/example/SampleCustomLoader</strong></p>
<p>This customloader is built with the model server build and available in the docker <em>openvino/model_server-build:latest</em>. The shared library can be either copied from this docker or built using makefile. An example Makefile is provided as  a reference in the directory.</p>
</section>
<section id="running-example-customloader">
<h1>Running Example Customloader:<a class="headerlink" href="#running-example-customloader" title="Permalink to this headline">¶</a></h1>
<p>An example custom loader is implemented under “src/example/SampleCustomLoader”.</p>
<p>Follow the below steps to use example custom model loader:</p>
<p>Step 1: Prepare test directory.</p>
<p>Download the model server code &amp; build the docker (make docker_build).
Once the docker is ready, create a folder where all the artifacts can be downloaded. Make sure that the models, client components, and images are all downloaded to this folder. Additionally, create a json file required for this folder.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">test_custom_loader</span>
<span class="n">cd</span> <span class="n">test_custom_loader</span>
</pre></div>
</div>
<p>Step 2: Prepare the example of the custom loader library</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">model_server</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">SampleCustomLoader</span>
<span class="n">make</span> <span class="n">docker_build</span>
</pre></div>
</div>
<p>It will generate the library in the <code class="docutils literal notranslate"><span class="pre">lib/libsampleloader.so</span></code> path.</p>
<p>Copy <code class="docutils literal notranslate"><span class="pre">lib</span></code> folder to the previously created directory <code class="docutils literal notranslate"><span class="pre">test_custom_loader</span></code>.</p>
<p>Step 3:  Download a Model</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">dirs</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">storage</span><span class="o">.</span><span class="n">openvinotoolkit</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">open_model_zoo</span><span class="o">/</span><span class="mf">2022.1</span><span class="o">/</span><span class="n">models_bin</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="n">face</span><span class="o">-</span><span class="n">detection</span><span class="o">-</span><span class="n">retail</span><span class="o">-</span><span class="mi">0004</span><span class="o">/</span><span class="n">FP32</span><span class="o">/</span><span class="n">face</span><span class="o">-</span><span class="n">detection</span><span class="o">-</span><span class="n">retail</span><span class="o">-</span><span class="mf">0004.</span><span class="n">xml</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">storage</span><span class="o">.</span><span class="n">openvinotoolkit</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">open_model_zoo</span><span class="o">/</span><span class="mf">2022.1</span><span class="o">/</span><span class="n">models_bin</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="n">face</span><span class="o">-</span><span class="n">detection</span><span class="o">-</span><span class="n">retail</span><span class="o">-</span><span class="mi">0004</span><span class="o">/</span><span class="n">FP32</span><span class="o">/</span><span class="n">face</span><span class="o">-</span><span class="n">detection</span><span class="o">-</span><span class="n">retail</span><span class="o">-</span><span class="mf">0004.</span><span class="n">bin</span> <span class="o">-</span><span class="n">o</span> <span class="n">model</span><span class="o">/</span><span class="n">fdsample</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">face</span><span class="o">-</span><span class="n">detection</span><span class="o">-</span><span class="n">retail</span><span class="o">-</span><span class="mf">0004.</span><span class="n">xml</span> <span class="o">-</span><span class="n">o</span> <span class="n">model</span><span class="o">/</span><span class="n">fdsample</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">face</span><span class="o">-</span><span class="n">detection</span><span class="o">-</span><span class="n">retail</span><span class="o">-</span><span class="mf">0004.</span><span class="n">bin</span>

<span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">755</span> <span class="o">./</span><span class="n">model</span>
</pre></div>
</div>
<p>Step 4: Download the required Client Components</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">fail</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openvinotoolkit</span><span class="o">/</span><span class="n">model_server</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mi">2022</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">demos</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">client_utils</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">o</span> <span class="n">client_utils</span><span class="o">.</span><span class="n">py</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openvinotoolkit</span><span class="o">/</span><span class="n">model_server</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mi">2022</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">demos</span><span class="o">/</span><span class="n">face_detection</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">face_detection</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">o</span> <span class="n">face_detection</span><span class="o">.</span><span class="n">py</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openvinotoolkit</span><span class="o">/</span><span class="n">model_server</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mi">2022</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">demos</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">o</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>

<span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Step 5: Download Data for Inference</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">fail</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">dirs</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openvinotoolkit</span><span class="o">/</span><span class="n">model_server</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mi">2022</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">demos</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">people</span><span class="o">/</span><span class="n">people1</span><span class="o">.</span><span class="n">jpeg</span> <span class="o">-</span><span class="n">o</span> <span class="n">images</span><span class="o">/</span><span class="n">people1</span><span class="o">.</span><span class="n">jpeg</span>
</pre></div>
</div>
<p>Step 6: Prepare the config json.</p>
<p>Example configuration file: Copy the following contents into a file and name it sampleloader.json</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
        &quot;custom_loader_config_list&quot;:[
        {
                &quot;config&quot;:{
                &quot;loader_name&quot;:&quot;sampleloader&quot;,
                &quot;library_path&quot;: &quot;/sampleloader/lib/libsampleloader.so&quot;,
                &quot;loader_config_file&quot;: &quot;config.json&quot;
                }
        }
        ],
        &quot;model_config_list&quot;:[
        {
                &quot;config&quot;:{
                &quot;name&quot;:&quot;sampleloader-model&quot;,
                &quot;base_path&quot;:&quot;/sampleloader/model/fdsample&quot;,
                &quot;custom_loader_options&quot;: {&quot;loader_name&quot;:  &quot;sampleloader&quot;, &quot;model_file&quot;:  &quot;face-detection-retail-0004.xml&quot;, &quot;bin_file&quot;: &quot;face-detection-retail-0004.bin&quot;, &quot;enable_file&quot;: &quot;face-detection-retail.status&quot;}
                }
        }
        ]
}
</pre></div>
</div>
<p>Step 7: Start the model server container</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -d -v ${PWD}:/sampleloader -p 9000:9000 openvino/model_server:latest --config_path /sampleloader/sampleloader.json --port 9000  --log_level DEBUG
</pre></div>
</div>
<p>Step 8: Run inference &amp; Review the results</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">face_detection</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">batch_size</span> <span class="mi">1</span> <span class="o">--</span><span class="n">width</span> <span class="mi">300</span> <span class="o">--</span><span class="n">height</span> <span class="mi">300</span> <span class="o">--</span><span class="n">input_images_dir</span> <span class="n">images</span> <span class="o">--</span><span class="n">output_dir</span> <span class="n">results</span> <span class="o">--</span><span class="n">model_name</span> <span class="n">sampleloader</span><span class="o">-</span><span class="n">model</span>
</pre></div>
</div>
<section id="blacklisting-the-model">
<h2>Blacklisting the model<a class="headerlink" href="#blacklisting-the-model" title="Permalink to this headline">¶</a></h2>
<p>Even though a model is specified in the config file, you may need to disable the model under certain conditions, for example, expired model license.
To demonstrate this capability, this sample loader allows the users to specify an optional parameter “enable_file” in “custom_loader_options” in the configuration file.
The file needs to be present at the model version folder (base path with the version number).</p>
<p>If you want to disable the model, create a file with the specified name and add a single line <strong>DISABLED</strong> to the file.
The customloader checks for this file periodically and, if present with required string, marks the model for unloading.
To reload the model either remove the string from the file or delete the file.</p>
</section>
</section>


                </div>
            
            
                <div class='prev-next-bottom'>
                  

                </div>
            
          </main>
          

      </div>
    </div>
  
  <script src="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Intel®.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>